<p style="color: green"><%= notice %></p>

<%= render @oue_organization %>

<div class="mt-4">
  <h3>Користувачі організації</h3>
  
  <% if @users.any? %>
    <div class="mb-3">
      <% @users.each do |user| %>
        <div class="d-flex justify-content-between align-items-center border p-2 mb-2">
          <span><%= user.name || user.email %></span>
          <%= link_to "Видалити", remove_user_oue_organization_path(@oue_organization, user), 
                      method: :delete, 
                      class: "btn btn-sm btn-danger",
                      confirm: "Ви впевнені?" %>
        </div>
      <% end %>
    </div>
  <% else %>
    <p>Немає прив'язаних користувачів</p>
  <% end %>

  <% if @available_users.any? %>
    <div class="mt-3">
      <h4>Додати користувача</h4>
      <%= form_with url: add_user_oue_organization_path(@oue_organization), method: :post, local: true do |form| %>
        <div class="d-flex">
          <%= form.select :user_id, 
                          options_from_collection_for_select(@available_users, :id, ->(user) { user.name || user.email }), 
                          { prompt: "Оберіть користувача" }, 
                          { class: "form-select me-2" } %>
          <%= form.submit "Додати", class: "btn btn-primary" %>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="mt-3">Всі користувачі вже додані до організації</p>
  <% end %>
</div>

<div class="mt-4">
  <%= link_to "Edit this oue organization", edit_oue_organization_path(@oue_organization) %> |
  <%= link_to "Back to oue organizations", oue_organizations_path %>

  <%= button_to "Destroy this oue organization", @oue_organization, method: :delete %>
</div>
